(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{77:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return p})),n.d(t,"toc",(function(){return i})),n.d(t,"default",(function(){return o}));var r=n(3),a=n(7),l=(n(0),n(83)),b=n(85),c={id:"fun-service",title:"\u670d\u52a1\u7aef\u5bf9\u63a5",sidebar_label:"\u670d\u52a1\u7aef"},p={unversionedId:"fun-service",id:"fun-service",isDocsHomePage:!1,title:"\u670d\u52a1\u7aef\u5bf9\u63a5",description:"\u83b7\u53d6\u7528\u6237\u4fe1\u606f",source:"@site/docs/fun-service.md",slug:"/fun-service",permalink:"/XDSDK-Doc/fun-service",version:"current",sidebar_label:"\u670d\u52a1\u7aef",sidebar:"xdsdk",previous:{title:"\u6570\u636e\u6536\u96c6",permalink:"/XDSDK-Doc/fun-db"},next:{title:"FAQ",permalink:"/XDSDK-Doc/xd-faq"}},i=[{value:"\u83b7\u53d6\u7528\u6237\u4fe1\u606f",id:"\u83b7\u53d6\u7528\u6237\u4fe1\u606f",children:[]},{value:"\u5904\u7406\u652f\u4ed8\u56de\u8c03",id:"\u5904\u7406\u652f\u4ed8\u56de\u8c03",children:[]}],d={toc:i};function o(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(l.b)("wrapper",Object(r.a)({},d,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("h2",{id:"\u83b7\u53d6\u7528\u6237\u4fe1\u606f"},"\u83b7\u53d6\u7528\u6237\u4fe1\u606f"),Object(l.b)("p",null,"\u6e38\u620f\u670d\u52a1\u7aef\u4f7f\u7528\u5ba2\u6237\u7aef\u83b7\u53d6\u7684access token\uff0c\u6309\u7167\u4e0b\u9762\u7684\u65b9\u5f0f\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u3002"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-php"},'\u63a5\u53e3\uff1ahttps://api.xd.com/v1/user\nmethod\uff1aGET\n\u53c2\u6570\uff1aaccess_token\n\u8bf7\u6c42\u793a\u4f8b\uff1ahttps://api.xd.com/v1/user?access_token=1234\n\u6210\u529f\u5224\u65ad\uff1a\u8fd4\u56de\u7684HTTP Code\u4e3a200\u65f6\u8868\u793a\u6210\u529f\uff0c\u5426\u5219\u5931\u8d25\n\u8fd4\u56de\u6570\u636e\u683c\u5f0f\uff1aapplication/json\n\u8fd4\u56de\u503c\u793a\u4f8b\uff1a\n{"id":"1",\n"id_card":"1111",\n"name":"xdname",\n"friendly_name":"xdfriendly_name",\n"client_id":"abc",\n"phone":"1",\n"safety":false,\n"site":"1"}\nid\uff1a\u7528\u6237\u7684ID\uff0c\u6ce8\u610f\u7c7b\u578b\u662f\u5b57\u7b26\u4e32\nid_card\uff1a\u52a0\u5bc6\u7684\u8eab\u4efd\u8bc1\u53f7\uff0c\u53ef\u80fd\u4e3a\u7a7a\nname\uff1a\u7528\u6237\u7684\u8d26\u53f7\u540d\u79f0\nfriendly_name\uff1a\u7528\u6237\u7684\u6635\u79f0\uff0c\u5982\u679c\u6e38\u620f\u60f3\u8981\u5c55\u73b0\u7528\u6237\u540d\u79f0\uff0c\u5efa\u8bae\u4f7f\u7528\u8be5\u5b57\u6bb5\nclient_id\uff1a\u8be5\u7528\u6237\u5728\u8be5\u6e38\u620f\u767b\u5f55\u65f6\u4f7f\u7528\u7684\u5fc3\u52a8AppID\nphone\uff1a \u7ed1\u5b9a\u7684\u624b\u673a\u53f7\u7801\nsafety\uff1a \u8d26\u53f7\u662f\u5426\u5b89\u5168/\u901a\u8fc7\u8bbe\u5907\u4e8c\u6b21\u9a8c\u8bc1\uff08true\uff1a\u5b89\u5168\uff0cfalse\uff1a\u4e0d\u5b89\u5168\uff09\nsite\uff1a\u8d26\u53f7\u7c7b\u578b, 0 => vc\u8d26\u53f7\uff0c1 => \u5fc3\u52a8\u8d26\u53f7\uff0c3 => qq\u8d26\u53f7\uff0c8 => \u5fae\u4fe1\u8d26\u53f7\uff0c9 => TapTap\u8d26\u53f7\uff0c\u6ce8\u610f\u7c7b\u578b\u662f\u5b57\u7b26\u4e32\nauthoriz_state\uff1a0/1/2/3/4\uff08\u5b9e\u540d\u72b6\u6001,0\u672a\u5b9e\u540d\uff0c>0 \u90fd\u8868\u793a\u5df2\u5b9e\u540d\u8ba4\u8bc1\uff09\n')),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",{parentName:"tr",align:null},"\u5e94\u7528\u573a\u666f"),Object(l.b)("th",{parentName:"tr",align:null},"\u53c2\u6570\u4ee5\u53ca\u4f7f\u7528\u65b9\u6cd5"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"\u5224\u65ad\u662f\u5426\u6e38\u5ba2\u8d26\u53f7"),Object(l.b)("td",{parentName:"tr",align:null},"\u6e38\u5ba2\u8d26\u53f7\u7684name\u548cid\u76f8\u540c")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"\u5224\u65ad\u662f\u5426\u901a\u8fc7\u4e8c\u6b21\u9a8c\u8bc1"),Object(l.b)("td",{parentName:"tr",align:null},"safety\uff080\u672a\u5b9e\u540d\uff0c>0 \u90fd\u8868\u793a\u5df2\u5b9e\u540d\u8ba4\u8bc1\uff09")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"\u5224\u65ad\u8d26\u53f7\u7c7b\u578b"),Object(l.b)("td",{parentName:"tr",align:null},"site\uff080 => vc\u8d26\u53f7\uff0c1 => \u5fc3\u52a8\u8d26\u53f7\uff0c3 => qq\u8d26\u53f7\uff0c8 => \u5fae\u4fe1\u8d26\u53f7\uff0c9 => TapTap\u8d26\u53f7\uff0c\u6ce8\u610f\u7c7b\u578b\u662f\u5b57\u7b26\u4e32\uff09")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"\u5224\u65ad\u662f\u5426\u5b9e\u540d\u8ba4\u8bc1"),Object(l.b)("td",{parentName:"tr",align:null},"authoriz_state\uff080\u672a\u5b9e\u540d\uff0c>0 \u90fd\u8868\u793a\u5df2\u5b9e\u540d\u8ba4\u8bc1\uff09")))),Object(l.b)("h2",{id:"\u5904\u7406\u652f\u4ed8\u56de\u8c03"},"\u5904\u7406\u652f\u4ed8\u56de\u8c03"),Object(l.b)("p",null,"\u6e38\u620f\u670d\u52a1\u7aef\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u80fd\u591f\u5904\u7406\u652f\u4ed8\u56de\u8c03\u7684\u63a5\u53e3\uff0c\u8fd9\u4e2a\u63a5\u53e3\u662f\u7533\u8bf7\u5fc3\u52a8AppID\u65f6\u9700\u8981\u7684\u3002\u5904\u7406\u903b\u8f91\u4e2d\uff0c\u9700\u8981\u4f7f\u7528\u4e00\u4e2a\u5bc6\u94a5\u8fdb\u884c\u52a0\u5bc6\u9a8c\u8bc1\uff0c\u8be5\u5bc6\u94a5\u5373\u4e3a\u5fc3\u52a8AppKey\u3002\n\u5f53\u5fc3\u52a8\u5e73\u53f0\u5904\u6709\u5145\u503c\u6210\u529f\u65f6\uff0c\u5fc3\u52a8\u670d\u52a1\u7aef\u4f1a\u901a\u77e5\u5230\u652f\u4ed8\u56de\u8c03\u63a5\u53e3\uff0c\u4fe1\u606f\u5982\u4e0b\u3002"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"method\uff1aPOST\n\u6570\u636e\u683c\u5f0f\uff1aapplication/x-www-form-urlencoded\n")),Object(l.b)("p",null,"\u8bf7\u52ff\u4fe1\u4efb\u900f\u4f20\u53c2\u6570"),Object(l.b)("p",null,"\u5b57\u6bb5\u5982\u4e0b\u3002"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",{parentName:"tr",align:null},"\u5b57\u6bb5"),Object(l.b)("th",{parentName:"tr",align:null},"\u7c7b\u578b"),Object(l.b)("th",{parentName:"tr",align:null},"\u63cf\u8ff0"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"order_id"),Object(l.b)("td",{parentName:"tr",align:null},"number"),Object(l.b)("td",{parentName:"tr",align:null},"\u5fc3\u52a8\u5e73\u53f0\u7684\u8ba2\u5355\u53f7\uff0c\u76f8\u540c\u8ba2\u5355\u53f7\u8868\u793a\u662f\u540c\u4e00\u7b14\u652f\u4ed8")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"payment"),Object(l.b)("td",{parentName:"tr",align:null},"string"),Object(l.b)("td",{parentName:"tr",align:null},"\u652f\u4ed8\u65b9\u5f0f\uff0cappstore\u6216\u5176\u5b83\uff08\u82e5\u56de\u8c03\u65e0\u8be5\u5b57\u6bb5\uff0c\u5219\u9ed8\u8ba4\u4e3aappstore\uff09")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"sub_payment"),Object(l.b)("td",{parentName:"tr",align:null},"string"),Object(l.b)("td",{parentName:"tr",align:null},"\u5b50\u652f\u4ed8\u65b9\u5f0f\uff0cProduction\u3001Sandbox\u6216\u5176\u4ed6\uff0c\u4e3aSandbox\u8868\u793a\u82f9\u679c\u6c99\u76d2\u5145\u503c\uff08\u503c\u53ef\u80fd\u4e3a\u7a7a\uff09")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"user_id"),Object(l.b)("td",{parentName:"tr",align:null},"string"),Object(l.b)("td",{parentName:"tr",align:null},"\u5145\u503c\u7528\u6237ID\uff0c\u6ce8\u610f\u7c7b\u578b\u662f\u5b57\u7b26\u4e32")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"client_id"),Object(l.b)("td",{parentName:"tr",align:null},"string"),Object(l.b)("td",{parentName:"tr",align:null},"\u5145\u503c\u7684\u5fc3\u52a8AppID")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"app"),Object(l.b)("td",{parentName:"tr",align:null},"string"),Object(l.b)("td",{parentName:"tr",align:null},"\u540cclient_id")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"app_id"),Object(l.b)("td",{parentName:"tr",align:null},"string"),Object(l.b)("td",{parentName:"tr",align:null},"\u6e38\u620f\u5ba2\u6237\u7aef\u8c03\u7528\u5145\u503c\u65f6\u4f20\u9012\u7684Sid\u5b57\u6bb5")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"app","_","order_id"),Object(l.b)("td",{parentName:"tr",align:null},"string"),Object(l.b)("td",{parentName:"tr",align:null},"\u6e38\u620f\u5ba2\u6237\u7aef\u8c03\u7528\u5145\u503c\u65f6\u4f20\u9012\u7684OrderId\u5b57\u6bb5")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"role_id"),Object(l.b)("td",{parentName:"tr",align:null},"string"),Object(l.b)("td",{parentName:"tr",align:null},"\u6e38\u620f\u5ba2\u6237\u7aef\u8c03\u7528\u5145\u503c\u65f6\u4f20\u9012\u7684Role_Id\u5b57\u6bb5")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"product_id"),Object(l.b)("td",{parentName:"tr",align:null},"string"),Object(l.b)("td",{parentName:"tr",align:null},"\u652f\u4ed8\u8d2d\u4e70\u7684\u5546\u54c1ID")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"gold"),Object(l.b)("td",{parentName:"tr",align:null},"number"),Object(l.b)("td",{parentName:"tr",align:null},"\u652f\u4ed8\u5b9e\u9645\u6240\u4ed8\u91d1\u989d\uff0c\u5355\u4f4d\u5143\u3002\uff08\u4ec5\u5728\u5ba2\u6237\u7aef\u4f7f\u7528\u975eAppStore\u652f\u4ed8\u65b9\u5f0f\u652f\u4ed8\u65f6\u624d\u6709\u8be5\u5b57\u6bb5\uff09")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"ext"),Object(l.b)("td",{parentName:"tr",align:null},"string"),Object(l.b)("td",{parentName:"tr",align:null},"\u6e38\u620f\u5ba2\u6237\u7aef\u8c03\u7528\u5145\u503c\u65f6\u4f20\u9012\u7684EXT\u5b57\u6bb5")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"timestamp"),Object(l.b)("td",{parentName:"tr",align:null},"number"),Object(l.b)("td",{parentName:"tr",align:null},"\u65f6\u95f4\u6233\uff0c1970\u5e74\u5230\u5f53\u524d\u65f6\u95f4\u7684\u79d2\u6570")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"sign"),Object(l.b)("td",{parentName:"tr",align:null},"string"),Object(l.b)("td",{parentName:"tr",align:null},"\u7b7e\u540d\u6821\u9a8c\u5b57\u6bb5\uff0c\u6309\u7167\u4e0b\u9762\u7684\u65b9\u5f0f\u8fdb\u884c\u6821\u9a8c")))),Object(l.b)("p",null,"\u7b7e\u540d\u7b97\u6cd5\u793a\u4f8b\uff0c\u4f7f\u7528php\u8bed\u8a00\u3002"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-php"},"/**\n* @param params \u7c7b\u578barray\uff0c\u652f\u4ed8\u56de\u8c03\u65f6\u6536\u5230\u7684\u53c2\u6570\n* @param appKey \u7c7b\u578bstring\uff0c\u5fc3\u52a8AppKey\n*/\nfunction verify_sign($params, $appKey) {\n$tmp = $params;\n$sign = $tmp['sign'];\nunset($tmp['sign']);\nksort($tmp);\n\nreturn strcasecmp($sign, md5(http_build_query($tmp) . $appKey)) == 0;\n}\n")),Object(l.b)(b.a,{color:"#f00",mdxType:"Highlight"},"\u9700\u8981\u6ce8\u610f"),Object(l.b)("p",null,"1\u3001\u6e38\u620f\u670d\u52a1\u7aef\u5e94\u8be5\u6309\u7167order_id\u8fdb\u884c\u6392\u91cd\uff0c\u76f8\u540corder_id\u4ec5\u751f\u6548\u4e00\u6b21\u3002  "),Object(l.b)("p",null,"2\u3001\u6e38\u620f\u670d\u52a1\u7aef\u6210\u529f\u5904\u7406\u4e86\u652f\u4ed8\u56de\u8c03\u540e\uff0c\u5e94\u5f53\u8fd4\u56de\u5b57\u7b26\u4e32\u201csuccess\u201d\uff0c\u5982\u679c\u662f\u4e00\u7b14\u5df2\u7ecf\u5904\u7406\u7684\u91cd\u590d\u7684\u8ba2\u5355\uff0c\u4e5f\u5e94\u8be5\u8fd4\u56de\u201csuccess\u201d\u3002  "),Object(l.b)("p",null,"3\u3001\u53ea\u8981\u901a\u8fc7\u7b7e\u540d\u6821\u9a8c\u7684\u56de\u8c03\uff0c\u90fd\u5e94\u8be5\u89c6\u4e3a\u5408\u6cd5\u6570\u636e\uff0c\u6309\u7167\u5982\u4e0b\u903b\u8f91\u53d1\u653e\u9053\u5177\u3002A.\u5982\u679cpayment\u5b57\u6bb5\u4e3aappstore\uff0c\u5373AppStore\u652f\u4ed8\uff0c\u76f4\u63a5\u6309\u7167product_id\u5b57\u6bb5\u8fdb\u884c\u9053\u5177\u53d1\u653e\uff1bB.\u5982\u679cpayment\u5b57\u6bb5\u4e3a\u5176\u5b83\u503c\uff0c\u9700\u8981\u9a8c\u8bc1gold\u5b57\u6bb5\u548c product_id \u5b57\u6bb5\u662f\u5426\u76f8\u7b26\uff0c\u5982\u679c\u76f8\u7b26\uff0c\u6309\u7167product_id\u53d1\u653e\u9053\u5177\uff0c\u5982\u679c\u4e0d\u76f8\u7b26\uff0c\u76f4\u63a5\u6309\u7167gold\u5b57\u6bb5\u6298\u7b97\u6210\u5bf9\u5e94\u7684\u6e38\u620f\u8d27\u5e01\u53d1\u653e\u3002  "))}o.isMDXComponent=!0},83:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return O}));var r=n(0),a=n.n(r);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=a.a.createContext({}),d=function(e){var t=a.a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},o=function(e){var t=d(e.components);return a.a.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,b=e.parentName,i=p(e,["components","mdxType","originalType","parentName"]),o=d(n),m=r,O=o["".concat(b,".").concat(m)]||o[m]||u[m]||l;return n?a.a.createElement(O,c(c({ref:t},i),{},{components:n})):a.a.createElement(O,c({ref:t},i))}));function O(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,b=new Array(l);b[0]=m;var c={};for(var p in t)hasOwnProperty.call(t,p)&&(c[p]=t[p]);c.originalType=e,c.mdxType="string"==typeof e?e:r,b[1]=c;for(var i=2;i<l;i++)b[i]=n[i];return a.a.createElement.apply(null,b)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n.n(r),l=function(e){var t=e.children,n=e.color;return a.a.createElement("span",{style:{color:n,padding:"0.2rem"}},t)}}}]);