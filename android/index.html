<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/XDSDK-Doc/blog/rss.xml" title="XDSDK 文档中心 Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/XDSDK-Doc/blog/atom.xml" title="XDSDK 文档中心 Blog Atom Feed"><title data-react-helmet="true">Android快速开始 | XDSDK 文档中心</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Android快速开始 | XDSDK 文档中心"><meta data-react-helmet="true" name="description" content="心动SDK（Android）对接文档"><meta data-react-helmet="true" property="og:description" content="心动SDK（Android）对接文档"><meta data-react-helmet="true" property="og:url" content="https://xindong.github.io/XDSDK-Doc/android"><link data-react-helmet="true" rel="shortcut icon" href="/XDSDK-Doc/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://xindong.github.io/XDSDK-Doc/android"><link rel="stylesheet" href="/XDSDK-Doc/styles.98143238.css">
<link rel="stylesheet" href="/XDSDK-Doc/main.c62259f1.css">
<link rel="preload" href="/XDSDK-Doc/styles.04ea6341.js" as="script">
<link rel="preload" href="/XDSDK-Doc/runtime~main.aa48e010.js" as="script">
<link rel="preload" href="/XDSDK-Doc/main.00965467.js" as="script">
<link rel="preload" href="/XDSDK-Doc/1.ab684445.js" as="script">
<link rel="preload" href="/XDSDK-Doc/2.f8601547.js" as="script">
<link rel="preload" href="/XDSDK-Doc/22.95066253.js" as="script">
<link rel="preload" href="/XDSDK-Doc/935f2afb.84422a50.js" as="script">
<link rel="preload" href="/XDSDK-Doc/17896441.f8f7aa8e.js" as="script">
<link rel="preload" href="/XDSDK-Doc/6e641c59.8633def8.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/XDSDK-Doc/"><img src="/XDSDK-Doc/img/logo.png" alt="XDSDK" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/XDSDK-Doc/img/logo.png" alt="XDSDK" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a><a class="navbar__item navbar__link" href="/XDSDK-Doc/">XDSDK</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/xindong/XDSDK-Doc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/XDSDK-Doc/"><img src="/XDSDK-Doc/img/logo.png" alt="XDSDK" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/XDSDK-Doc/img/logo.png" alt="XDSDK" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/XDSDK-Doc/">XDSDK</a></li><li class="menu__list-item"><a href="https://github.com/xindong/XDSDK-Doc" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">接入文档</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/XDSDK-Doc/unity2.x">Unity2.x</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/XDSDK-Doc/">Unity3.x</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/XDSDK-Doc/android">Android</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/XDSDK-Doc/ios">iOS</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">功能介绍</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/XDSDK-Doc/fun-db">TapDB (XDSDK 中使用)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/XDSDK-Doc/tap-fun-db">TapDB (单独使用)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/XDSDK-Doc/tap-moment">动态 2.x</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/XDSDK-Doc/tap-fun-moment">动态 3.x</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/XDSDK-Doc/fun-service">服务端</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/XDSDK-Doc/xd-faq">常见问题</a></li><li class="menu__list-item"><a class="menu__link" href="/XDSDK-Doc/xdsdk-changelog">更新日志</a></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Android快速开始</h1></header><div class="markdown"><p>心动SDK（Android）对接文档</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1心动sdk介绍"></a>1.心动SDK介绍<a class="hash-link" href="#1心动sdk介绍" title="Direct link to heading">#</a></h2><p>心动SDK主要为游戏提供登录，支付等功能。登录流程和支付流程都需要客户端和服务端同时参与。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="11登录流程"></a>1.1.登录流程<a class="hash-link" href="#11登录流程" title="Direct link to heading">#</a></h3><p><img src="https://static.tapdb.net/web/res/img/upload/2017/06/27/01.png" alt="unitypackage import">  </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="12支付流程"></a>1.2.支付流程<a class="hash-link" href="#12支付流程" title="Direct link to heading">#</a></h3><p><img src="https://static.tapdb.net/web/res/img/upload/2017/06/27/02.png" alt="unitypackage import"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="13sdk集成流程"></a>1.3.SDK集成流程<a class="hash-link" href="#13sdk集成流程" title="Direct link to heading">#</a></h3><p><img src="https://static.tapdb.net/web/res/img/upload/2017/07/27/01.png" alt="unitypackage import"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2申请心动appid"></a>2.申请心动AppID<a class="hash-link" href="#2申请心动appid" title="Direct link to heading">#</a></h2><p>参阅“心动AppID申请介绍”文档，申请心动AppID，获得心动AppID、心动AppKey、微信AppID、QQ AppID、Ping++ ID。其中心动AppID主要是客户端对接时使用，AppKey主要是服务端对接支付回调时使用。</p><span style="color:#f00;padding:0.2rem">* 注意，如果游戏需要自行接入微信分享功能，必须使用心动提供的微信AppID，否则会导致微信登录失败</span><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="3需要遵守的规则"></a>3.需要遵守的规则<a class="hash-link" href="#3需要遵守的规则" title="Direct link to heading">#</a></h2><p>对接过程中，为了避免出现一些奇怪的问题，无特殊需求情况下，请尽量遵守下面的规则。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="31回调依赖"></a>3.1.回调依赖<a class="hash-link" href="#31回调依赖" title="Direct link to heading">#</a></h3><p>游戏调用SDK的功能，SDK通常会以回调形式通知到游戏，除了必须依赖的回调（如登录成功回调），其它回调尽可能不依赖。此场景适用于登录、打开用户中心、支付。</p><p>比如游戏登录，通常是游戏提供一个登录按钮，用户点击后调用SDK登录，此时有两种处理方式。A、点击后，游戏隐藏登录按钮或使用loading图标盖住，等收到SDK登录失败回调时，才会再次展现登录按钮或移除loading。B、无论是否收到回调，都保证按钮处理可点状态。</p><p>建议游戏使用后者，防止意外情况下，流程无法走通，用户无法继续操作的情况。另外也可以采用后者的优化版，即用户点击后，仅屏蔽按钮1秒钟，这样可以防止用户反复点击导致SDK接口被反复调用。</p><p>总之游戏尽可能保证功能一直处于可用状态，而不依赖SDK的状态。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="4接入sdk"></a>4.接入SDK<a class="hash-link" href="#4接入sdk" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="41获取sdk"></a>4.1.获取SDK<a class="hash-link" href="#41获取sdk" title="Direct link to heading">#</a></h3><p>从心动平台处获取SDK，其中 libs 目录就是心动 SDK 项目，根据需要导入到项目中即可。</p><table><thead><tr><th>目录</th><th>用途</th></tr></thead><tbody><tr><td>libs</td><td>包含心动SDK的库和其它依赖库</td></tr></tbody></table><p><strong>注意：从 4.3.3 开始，即接入了<code>oaid_sdk_1.0.23.aar</code>依赖库，AndroidManifest 文件中需要添加 <code>&lt;uses-sdk tools:overrideLibrary=&quot;com.bun.miitmdid&quot;/&gt;</code>, 同时在 <code>manifest</code>节点中添加 <code> xmlns:tools=&quot;http://schemas.android.com/tools&quot;</code></strong></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="42声明相关的activity及文件配置"></a>4.2.声明相关的Activity及文件配置<a class="hash-link" href="#42声明相关的activity及文件配置" title="Direct link to heading">#</a></h3><p><strong>请将配置中项目包名替换成游戏自己的包名</strong>，例如 &quot;com.xd.test&quot;</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-xml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">application</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">&lt;!-- 微信登录 --&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">activity-alias</span><span class="token tag" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token tag" style="color:rgb(255, 121, 198)">            </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">name</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">包名.wxapi.WXEntryActivity</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token tag" style="color:rgb(255, 121, 198)">            </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">exported</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">true</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token tag" style="color:rgb(255, 121, 198)">            </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">targetActivity</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">com.xd.sdklib.helper.WXEntryActivity</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">&lt;!-- 微信支付 --&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">activity-alias</span><span class="token tag" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token tag" style="color:rgb(255, 121, 198)">            </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">name</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">包名.wxapi.WXPayEntryActivity</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token tag" style="color:rgb(255, 121, 198)">            </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">exported</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">true</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag" style="color:rgb(255, 121, 198)"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token tag" style="color:rgb(255, 121, 198)">        </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">targetActivity</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">com.pingplusplus.android.PaymentActivity</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">application</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="43-android-11-适配"></a>4.3 Android 11 适配<a class="hash-link" href="#43-android-11-适配" title="Direct link to heading">#</a></h3><p><strong>注意：为避免兼容性问题，建议游戏 targetVersion 使用 30 以下。</strong></p><p>如果编译时 targetSdkVersion &lt; 30, 则暂不需适配，可跳过。<br>
如果 targetSdkVersion &gt;= 30 , 则需要添加一下配置：  </p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="（1）添加-androidmanifest-配置"></a>（1）添加 AndroidManifest 配置<a class="hash-link" href="#（1）添加-androidmanifest-配置" title="Direct link to heading">#</a></h4><p> 在 AndroidManifest.xml 中添加如下内容：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-xml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">manifest</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">...</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">queries</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">package</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">name</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">com.tencent.mm</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">package</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">name</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">com.tencent.mobileqq</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">package</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">name</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">com.taptap</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">package</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">name</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">com.taptap.pad</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">package</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">name</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">com.taptap.global</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">queries</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">&lt;!-- 如果游戏需要游客登录或访问非游戏的其他目录文件，则需添加如下权限 --&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">!--</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">&lt;uses-permission</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">name</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">android.permission.MANAGE_EXTERNAL_STORAGE</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">...</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">manifest</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-修改-gradle-配置"></a>(2) 修改 gradle 配置<a class="hash-link" href="#2-修改-gradle-配置" title="Direct link to heading">#</a></h4><p>项目根目录 build.gradle 文件中 gradle 插件版本最低 3.6.0 。例如：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain"> dependencies </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        classpath &#x27;com.android.tools.build</span><span class="token operator">:</span><span class="token plain">gradle</span><span class="token operator">:</span><span class="token number">3.6</span><span class="token plain">.</span><span class="token number">3</span><span class="token plain">&#x27;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        ...</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="5接口调用"></a>5.接口调用<a class="hash-link" href="#5接口调用" title="Direct link to heading">#</a></h2><p>所有接口设计为静态方法，在com.xd.xdsdk.XDSDK中调用。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="51配置sdk登录选项"></a>5.1.配置SDK登录选项<a class="hash-link" href="#51配置sdk登录选项" title="Direct link to heading">#</a></h3><p><strong>如果游戏之前登录入口已包含 心动 或 QQ 、微信等其他的账号类型，则使用<code>自定义登录顺序</code>设置，否则使用<code>自定义登录入口</code>。</strong></p><p>建议一般在调用 SDK 初始化前进行登录入口设置。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1-自定义登录方式"></a>1. 自定义登录方式<a class="hash-link" href="#1-自定义登录方式" title="Direct link to heading">#</a></h4><p>自定义登录入口。共五种，其中主要两种，次要两种。
默认显示为：</p><p>iOS: 微信、QQ、游客、苹果、TapTap</p><p>安卓: 微信、TapTap、游客、苹果、QQ  </p><p>各登录方式对应名称如下：</p><ul><li>微信登录：WX_LOGIN，</li><li>taptap登录：TAPTAP_LOGIN，</li><li>QQ登录：QQ_LOGIN，</li><li>游客登录：GUEST_LOGIN，</li><li>心动登录：XD_LOGIN</li><li>苹果登录：APPLE_LOGIN</li></ul><span style="color:#f00;padding:0.2rem">由于苹果审核要求，iOS13 显示第三方登录的同时必须显示苹果登录(建议位置靠前)</span><span style="color:#f00;padding:0.2rem">SDK 在iOS12及以下、安卓中使用web实现苹果登录，但是若游戏iOS版未上架appstore，无法使用web版苹果登录，游戏需在iOS应用上架之后，才打开iOS12系统及以下和安卓的苹果登录入口。</span><p>例如传入的数组 {&quot;APPLE_LOGIN&quot;,&quot;WX_LOGIN&quot;,&quot;TAPTAP_LOGIN&quot;,&quot;GUEST_LOGIN&quot;,&quot;QQ_LOGIN&quot;}  </p><p><strong>注：(1) 最多只能显示5种登录方式。(2) 5个登录按钮中 TapTap 和心动登录不能同时显示</strong></p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-java codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// 自定义登录按钮及顺序</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setLoginEntries</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;WX_LOGIN&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;TAPTAP_LOGIN&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;GUEST_LOGIN&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;QQ_LOGIN&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-taptap-及自动登录"></a>2. TapTap 及自动登录<a class="hash-link" href="#2-taptap-及自动登录" title="Direct link to heading">#</a></h4><p>登录入口 UI 由游戏绘制，不再使用 SDK 页面。绘制登录按钮所需要的 UI 素材由 SDK 提供， 素材地址：<a href="/XDSDK登录方式(大陆)_2020.zip">XDSDK登录方式素材</a></p><p>使用该方式登录时, SDK 增加自定义登录接口（autoLogin/taptapLogin)，用户在点击游戏绘制的登录入口后，游戏调用对应登录接口即可。</p><p><strong>调用方法 ：</strong> 游戏首先隐藏登录入口，调用 autoLogin，根据登录回调看是否自动登录成功。如果自动登录失败，其中回调信息为『自动登录失败』，则显示登录界面，然后根据用户点击不同登录按钮调用对应登录接口如 taptapLogin 等。 </p><p><strong>注意：在使用自定义绘制按钮登录时，如果用户因防沉迷而点击切换账号按钮时，会返回登录取消的回调</strong></p><p>接口如下:  </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-java codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">//自动登录（若有上次登录记录，调用会直接登录成功）</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> bool </span><span class="token function" style="color:rgb(80, 250, 123)">autoLogin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// TapTap登录</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">taptapLogin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="52设置回调"></a>5.2.设置回调<a class="hash-link" href="#52设置回调" title="Direct link to heading">#</a></h3><p>游戏调用心动SDK的接口后，大部分情况都是通过回调的形式将结果返回给游戏，所以需要先设置对应的回调函数。</p><p>代码示例：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.setCallback(new XDCallback() {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            //初始化成功</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            public void onInitSucceed() {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            //初始化失败</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            public void onInitFailed(String msg) {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            //登录成功</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            public void onLoginSucceed(String token) {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            //登录失败</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            public void onLoginFailed(String msg) {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">                </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            //登录取消</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            public void onLoginCanceled() {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            //游客绑定成功</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            public void onGuestBindSucceed(String token) {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">             //游客绑定失败</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            public void onGuestBindFailed(String msg) {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            //登出成功</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            public void onLogoutSucceed() {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            //支付完成</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            public void onPayCompleted() {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            //支付失败</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            public void onPayFailed(String msg) {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            //支付取消</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            public void onPayCanceled() {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            //实名成功</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            public void onRealNameSucceed() {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">              //实名失败</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            public void onRealNameFailed(String msg) {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            //用户同意所有协议</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">              @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            public void onProtocolAgreed() {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">              //打开协议页面失败</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            public void onProtocolOpenFailed(String msg) {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">              //打开协议页面成功</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            public void onProtocolOpenSucceed() {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">               </span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            //非游客匿名账号绑定 Tap 账号成功回调（游客会返回升级成功回调）</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            //返回 msg 为对应 tap 信息, 包括 name,openid,unionid,avatar 字段</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">              @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            public void onBindTaptapSucceed(String msg) {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        });</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p><strong>注意：付费过程中，付费结果游戏应以请求服务端的结果为准</strong></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="53初始化sdk"></a>5.3.初始化SDK<a class="hash-link" href="#53初始化sdk" title="Direct link to heading">#</a></h3><p>初始化心动SDK，调用该接口是调用其它功能接口的必要条件。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> * @param activity 游戏的主activity</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> * @param appid 心动AppID</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> * @param aOrientation 屏幕方向，0表示横屏，1表示竖屏</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> * @param channel 渠道号</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> * @param version 版本号</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> * @param enableTapdb 是否开启内置TapDB统计功能，true表示开启，false表示不开启</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> * @param enableMoment 是否使用动态</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void initSDK(Activity activity, String appid, int aOrientation, String channel, String version, boolean enableTapdb, boolean enableMoment) </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>示例代码</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.initSDK(this, &quot;xxxxxxxxxxxxxx&quot;, 0, &quot;channel&quot;, &quot;version&quot;, false, true);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>调用该接口会触发下列回调。</p><span style="color:#f00;padding:0.2rem">其他接口请在获取到初始化成功回调之后进行调用。</span><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>初始化成功</td><td>public void onInitSucceed()</td></tr><tr><td>初始化失败</td><td>public void onInitFailed(String msg)</td></tr><tr><td>用户同意协议</td><td>public void onProtocolAgreed()</td></tr></tbody></table><span style="color:#f00;padding:0.2rem">注意：</span><span style="color:#f00;padding:0.2rem">已经单独接入TapDB的项目请勿开启内置TapDB统计功能</span><span style="color:#f00;padding:0.2rem">其他注意事项请参考Unity文档TapDB部分或与平台联系</span><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="54登录"></a>5.4.登录<a class="hash-link" href="#54登录" title="Direct link to heading">#</a></h3><p>注意：<strong>游戏应在收到同意协议的回调（OnProtocolAgreed）之后再进行登录操作</strong>  </p><p>调用该接口进行登录。
客户端授权登录需要包名和签名与申请时的信息保持一致。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">//登录配置为默认配置或自定义登录方式时，调用该接口</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void login();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">//登录配置为TapTap及自动登录时，调用方式如下</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">//先调用自动登录，如果登录失败，再显示tap登录按钮，用户点击后调用tap登录</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void autoLogin();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void taptapLogin();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>示例代码</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.login();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.autoLogin();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.taptapLogin();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>调用该接口会触发下列回调。</p><span style="color:#f00;padding:0.2rem">获取、查看用户信息以及支付接口请在获取到登录成功回调之后调用。</span><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>登录成功</td><td>public void onLoginSucceed(String token)</td></tr><tr><td>登录失败</td><td>public void onLoginFailed(String msg)</td></tr><tr><td>登录取消</td><td>public void onLoginCanceled()</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="55获取access-token"></a>5.5.获取Access Token<a class="hash-link" href="#55获取access-token" title="Direct link to heading">#</a></h3><p>调用该接口获取当前登录用户的access token。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static String getAccessToken()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>代码示例</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.getAccessToken()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="56获取当前登录状态"></a>5.6.获取当前登录状态<a class="hash-link" href="#56获取当前登录状态" title="Direct link to heading">#</a></h3><p>调用该接口获取当前登录状态。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public boolean isLoggedIn()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>代码示例</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.isLoggedIn()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="57打开用户中心"></a>5.7.打开用户中心<a class="hash-link" href="#57打开用户中心" title="Direct link to heading">#</a></h3><p>调用该接口打开用户中心界面，用户可以在该界面进行登出和登录操作，游戏注意正确处理回调。在未登录状态，无法打开用户中心。在用户中心中，用户可进行登出操作，此时交互界面将消失。游戏需要提供引导用户重新进行登录的操作界面。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">* @return false表示尚未登录，重复调用默认为成功</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">*/</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static boolean openUserCenter()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>代码示例</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.openUserCenter()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="58发起支付"></a>5.8.发起支付<a class="hash-link" href="#58发起支付" title="Direct link to heading">#</a></h3><p>调用该接口发起支付。</p><span style="color:#f00;padding:0.2rem">不保证在任何情况下都能收到回调，请勿直接使用SDK返回的支付结果作为最终判定订单状态的依据。</span><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">* @param info 支付相关信息，注意key和value都是字符串类型</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">*/</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static boolean pay(Map&lt;String, String&gt; info) </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>其中info的字段如下。</p><table><thead><tr><th>参数</th><th>必须</th><th>说明</th></tr></thead><tbody><tr><td>Product_Name</td><td>是</td><td>商品名称，建议以游戏名称开头，方便财务对账</td></tr><tr><td>Product_Id</td><td>是</td><td>商品ID</td></tr><tr><td>Product_Price</td><td>是</td><td>商品价格（单位分）</td></tr><tr><td>Sid</td><td>是</td><td>所在服务器ID，不能有特殊字符，服务端支付回调会包含该字段</td></tr><tr><td>Role_Id</td><td>是</td><td>支付角色ID，服务端支付回调会包含该字段</td></tr><tr><td>OrderId</td><td>否</td><td>游戏侧订单号，服务端支付回调会包含该字段</td></tr><tr><td>EXT</td><td>否</td><td>额外信息，最长512个字符，服务端支付回调会包含该字段。可用于标记区分充值回调地址，如需使用该功能，请联系平台进行配置。代码示例：info.put(&quot;EXT&quot;, &quot;{\&quot;payCallbackCode\&quot;:2}&quot;);</td></tr></tbody></table><p>调用该接口会触发下列回调。</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>支付完成</td><td>public void onPayCompleted()</td></tr><tr><td>支付失败</td><td>public void onPayFailed(String msg)</td></tr><tr><td>支付取消</td><td>public void onPayCanceled()</td></tr></tbody></table><p>示例代码</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">Map&lt;String, String&gt; info = new HashMap&lt;String, String&gt;();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">info.put(&quot;OrderId&quot;, &quot;1234567890123456789012345678901234567890&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">info.put(&quot;Product_Price&quot;, &quot;1&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">info.put(&quot;EXT&quot;, &quot;abcd|efgh|1234|5678&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">info.put(&quot;Sid&quot;, &quot;2&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">info.put(&quot;Role_Id&quot;, &quot;3&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">info.put(&quot;Product_Id&quot;, &quot;4&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">info.put(&quot;Product_Name&quot;, &quot;648大礼包&quot;);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.pay(info);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="59登出"></a>5.9.登出<a class="hash-link" href="#59登出" title="Direct link to heading">#</a></h3><p>需要注销当前登录用户时调用，该操作不会出现登录界面。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void logout() </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>调用该接口会触发下列回调</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>登出成功</td><td>public void onLogoutSucceed()</td></tr></tbody></table><p>示例代码</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.logout();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="510游客升级"></a>5.10.游客升级<a class="hash-link" href="#510游客升级" title="Direct link to heading">#</a></h3><p><strong>如果游戏只有 Tap 登录入口，该接口可忽略。</strong><br>
当游客账号升级成功时,会触发下列回调。<br>
后续如需使用token，务必使用回调给的新token。但已生效的会话无需处理。</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>游客升级成功</td><td>public void onGuestBindSucceed(String token)</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="511退出"></a>5.11.退出<a class="hash-link" href="#511退出" title="Direct link to heading">#</a></h3><p>调用该方法时，弹出确认框供用户选择是否退出。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void exit(ExitCallback callback)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>示例代码</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.exit(new ExitCallback() {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    public void onConfirm() {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        super.onConfirm();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    public void onCancle() {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">        super.onCancle();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">});</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="512实名认证"></a>5.12.实名认证<a class="hash-link" href="#512实名认证" title="Direct link to heading">#</a></h3><p>当用户为未实名玩家是，调用该方法弹出实名认证窗口。对于已实名用户，调用该接口会返回实名失败。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">/*实名认证*/</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void openRealName() </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>调用该接口会触发下列回调。</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>认证成功</td><td>public void onRealNameSucceed();</td></tr><tr><td>认证失败</td><td>public void onRealNameFailed(string error_msg);</td></tr></tbody></table><span style="color:#f00;padding:0.2rem">注意: 用户的实名认证状态以服务端接口（6.1）authoriz_state参数为准。</span><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="513游客绑定"></a>5.13.游客绑定<a class="hash-link" href="#513游客绑定" title="Direct link to heading">#</a></h3><p>对于游客账号，如果需要绑定 Tap 或其他类型账号时（根据游戏登录入口决定），调用如下接口：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void openUserBindView() </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>调用该接口会触发下列回调。</p><table><thead><tr><th>类别</th><th>回调方法</th></tr></thead><tbody><tr><td>成功</td><td>public void onGuestBindSucceed(String token);</td></tr><tr><td>失败</td><td>public void onGuestBindFailed(string msg);</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="514游戏启停设置"></a>5.14.游戏启停设置<a class="hash-link" href="#514游戏启停设置" title="Direct link to heading">#</a></h3><p>为防沉迷及其他事件统计，游戏需要在游戏启动和停止时调用 SDK 对应接口，一般在游戏主<code>Activity</code>的<code>onResume</code>和<code>onStop</code>中调用对应接口。示例如下：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">//参数为Activity实例</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.onResume(activity);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.onStop(activity);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>如果游戏需要主动控制防沉迷计时的启停，可以调用如下接口：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">//防沉迷开始计时</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.gameStarted();</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">//防沉迷停止计时</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">XDSDK.gameStoped();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="515客服"></a>5.15.客服<a class="hash-link" href="#515客服" title="Direct link to heading">#</a></h3><p>在用户登录成功状态下，调用该接口打开客服。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void userFeedback() </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="516打开协议页面"></a>5.16.打开协议页面<a class="hash-link" href="#516打开协议页面" title="Direct link to heading">#</a></h3><p>在用户登录成功状态下，调用该接口打开对应协议窗口。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void openProtocol(int type) </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>参数 type 为协议类型，0 用户协议 1 游戏游戏 2 隐私协议</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="517设置角色信息"></a>5.17.设置角色信息<a class="hash-link" href="#517设置角色信息" title="Direct link to heading">#</a></h3><p>如果游戏使用 <strong>自定义登录顺序</strong> 来配置登录入口，该设置可跳过。<br>
对于使用 <strong>自定义登录入口</strong> 的游戏，在用户登录成功状态下，游戏获取到当前角色信息时，调用如下接口进行设置：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">public static void setRole(String roleId,String roleName,String roleAvatar, String roleProfile)</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">//如果游戏没有角色形象信息，可调用</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">// public static void setRole(String roleId,String roleName,String roleAvatar)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>参数 roleId 为角色ID ，roleName 为角色信息，roleAvatar 为角色头像链接 roleProfile 为角色形象信息。<br>
当用户切换角色或登出时，游戏需要调用如下接口清除当前角色信息：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain"> public static void clearRole()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="6服务端对接"></a>6.服务端对接<a class="hash-link" href="#6服务端对接" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="61获取用户信息"></a>6.1.获取用户信息<a class="hash-link" href="#61获取用户信息" title="Direct link to heading">#</a></h3><p>游戏服务端使用客户端获取的access token，按照下面的方式获取用户信息。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">接口：https</span><span class="token operator">:</span><span class="token comment" style="color:rgb(98, 114, 164)">//api.xd.com/v1/user</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">method：GET</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">参数：access_token</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">请求示例：https</span><span class="token operator">:</span><span class="token comment" style="color:rgb(98, 114, 164)">//api.xd.com/v1/user?access_token=1234</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">成功判断：返回的HTTP Code为</span><span class="token number">200</span><span class="token plain">时表示成功，否则失败</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">返回数据格式：application/json</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">返回值示例：</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token property">&quot;id_card&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1111&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;xdname&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token property">&quot;friendly_name&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;xdfriendly_name&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token property">&quot;client_id&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;abc&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token property">&quot;phone&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token property">&quot;safety&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token property">&quot;site&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">id：用户的ID，注意类型是字符串</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">id_card：加密的身份证号，可能为空</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">name：用户的账号名称</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">friendly_name：用户的昵称，如果游戏想要展现用户名称，建议使用该字段</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">client_id：该用户在该游戏登录时使用的心动AppID</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">phone： 绑定的手机号码</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">safety： 账号是否安全/通过设备二次验证（</span><span class="token boolean">true</span><span class="token plain">：安全，</span><span class="token boolean">false</span><span class="token plain">：不安全）</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">site：账号类型</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> =&gt; vc账号，</span><span class="token number">1</span><span class="token plain"> =&gt; 心动账号，</span><span class="token number">3</span><span class="token plain"> =&gt; qq账号，</span><span class="token number">8</span><span class="token plain"> =&gt; 微信账号，</span><span class="token number">9</span><span class="token plain"> =&gt; TapTap账号，注意类型是字符串</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">fcm：</span><span class="token number">0</span><span class="token plain">/</span><span class="token number">1</span><span class="token plain">（</span><span class="token number">0</span><span class="token plain">：无需防沉迷，</span><span class="token number">1</span><span class="token plain">：需要防沉迷）</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">authoriz_state：</span><span class="token number">0</span><span class="token plain">/</span><span class="token number">1</span><span class="token plain">/</span><span class="token number">2</span><span class="token plain">/</span><span class="token number">3</span><span class="token plain">/</span><span class="token number">4</span><span class="token plain">（实名状态</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token number">0</span><span class="token plain">未实名，&gt;</span><span class="token number">0</span><span class="token plain"> 都表示已实名认证）</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="62处理支付回调"></a>6.2.处理支付回调<a class="hash-link" href="#62处理支付回调" title="Direct link to heading">#</a></h3><p>游戏服务端需要提供一个能够处理支付回调的接口，这个接口是申请心动AppID时需要的。处理逻辑中，需要使用一个密钥进行加密验证，该密钥即为心动AppKey。
当心动平台处有充值成功时，心动服务端会通知到支付回调接口，信息如下。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-java codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">method：POST</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">数据格式：application</span><span class="token operator">/</span><span class="token plain">x</span><span class="token operator">-</span><span class="token plain">www</span><span class="token operator">-</span><span class="token plain">form</span><span class="token operator">-</span><span class="token plain">urlencoded</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>字段如下。</p><table><thead><tr><th>字段</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>order_id</td><td>number</td><td>心动平台的订单号，相同订单号表示是同一笔支付</td></tr><tr><td>payment</td><td>string</td><td>支付方式，appstore或其它（若回调无该字段，则默认为appstore）</td></tr><tr><td>user_id</td><td>string</td><td>充值用户ID <span style="color:#f00;padding:0.2rem">注意类型是字符串</span></td></tr><tr><td>client_id</td><td>string</td><td>充值的心动AppID</td></tr><tr><td>app</td><td>string</td><td>同client_id</td></tr><tr><td>app_id</td><td>string</td><td>游戏客户端调用充值时传递的Sid字段</td></tr><tr><td>app_order_id</td><td>string</td><td>游戏客户端调用充值时传递的OrderId字段</td></tr><tr><td>role_id</td><td>string</td><td>游戏客户端调用充值时传递的Role_Id字段</td></tr><tr><td>product_id</td><td>string</td><td>支付购买的商品ID</td></tr><tr><td>gold</td><td>number</td><td>支付实际所付金额，单位元。（仅在客户端使用非AppStore支付方式支付时才有该字段）</td></tr><tr><td>ext</td><td>string</td><td>游戏客户端调用充值时传递的EXT字段</td></tr><tr><td>timestamp</td><td>number</td><td>时间戳，1970年到当前时间的秒数</td></tr><tr><td>sign</td><td>string</td><td>签名校验字段，按照下面的方式进行校验</td></tr></tbody></table><p>签名算法示例，使用php语言。</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">* @param params 类型array，支付回调时收到的参数</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">* @param appKey 类型string，心动AppKey</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">*/</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">function verify_sign($params, $appKey) {</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$tmp = $params;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">$sign = $tmp[&#x27;sign&#x27;];</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">unset($tmp[&#x27;sign&#x27;]);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">ksort($tmp);</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">return strcasecmp($sign, md5(http_build_query($tmp) . $appKey)) == 0;</span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><span style="color:#f00;padding:0.2rem">需要注意</span><span style="color:#f00;padding:0.2rem">游戏服务端应该按照order_id进行排重，相同order_id仅生效一次</span><span style="color:#f00;padding:0.2rem">游戏服务端成功处理了支付回调后，应当返回字符串“success”，如果是一笔已经处理的重复的订单，也应该返回“success”。</span><span style="color:#f00;padding:0.2rem">只要通过签名校验的回调，都应该视为合法数据，按照如下逻辑发放道具。A.如果payment字段为appstore，即AppStore支付，直接按照product_id字段进行道具发放；B.如果payment字段为其它值，需要验证gold字段和 product_id 字段是否相符，如果相符，按照product_id发放道具，如果不相符，直接按照gold字段折算成对应的游戏货币发放。</span><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="7多渠道打包"></a>7.多渠道打包<a class="hash-link" href="#7多渠道打包" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="71-配置渠道文件"></a>7.1 配置渠道文件<a class="hash-link" href="#71-配置渠道文件" title="Direct link to heading">#</a></h3><p> 将需要打包的渠道信息配置在JSON文件中，每个渠道必须包含 “channel&quot; 和 ”channelName&quot; 信息，否则可能报错或不会发送对应的广告事件。内容样例如下：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token property">&quot;channel&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;channel1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;channelName&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;渠道1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token property">&quot;channel&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;channel2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;channelName&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;渠道2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token property">&quot;channel&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;channel3&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;channelName&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;渠道3&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p> 为避免格式出错，建议可以在网页中的 JSON 编辑器将内容配置好，然后下载下来。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="72-提交打包信息"></a>7.2 提交打包信息<a class="hash-link" href="#72-提交打包信息" title="Direct link to heading">#</a></h3><p>   将打包相关文件的信息，包括母包、文件的输出路径、android签名文件（keystore）、签名文件的别名、签名文件的storePass、配置文件整理，联系平台处理。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="73-依赖配置"></a>7.3 依赖配置<a class="hash-link" href="#73-依赖配置" title="Direct link to heading">#</a></h3><p>   添加渠道依赖库 XDAdAction.aar文件，并新加权限:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-xml codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">uses-permission</span><span class="token tag" style="color:rgb(255, 121, 198)"> </span><span class="token tag attr-name namespace" style="color:rgb(241, 250, 140)">android:</span><span class="token tag attr-name" style="color:rgb(241, 250, 140)">name</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag attr-value" style="color:rgb(255, 121, 198)">android.permission.READ_PHONE_STATE</span><span class="token tag attr-value punctuation" style="color:rgb(248, 248, 242)">&quot;</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">/&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="74-tapdb-sdk单接处理"></a>7.4 TapDB SDK单接处理<a class="hash-link" href="#74-tapdb-sdk单接处理" title="Direct link to heading">#</a></h3><p>如果需要单独接入TapDB的SDK,可以通过XDSDK.getAdChannelName获取打完渠道包的渠道信息，用例如下：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-c# codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#F8F8F2;background-color:#282A36"><div class="token-line" style="color:#F8F8F2"><span class="token plain">    String adChannelName = XDSDK.getAdChannelName(activity);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>获得的渠道名称可以在初始化TapDB的SDK时传入，注意内容可能为null。</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/XDSDK-Doc/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Unity3.x快速开始</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/XDSDK-Doc/ios"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">iOS快速开始 »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1心动sdk介绍" class="table-of-contents__link">1.心动SDK介绍</a><ul><li><a href="#11登录流程" class="table-of-contents__link">1.1.登录流程</a></li><li><a href="#12支付流程" class="table-of-contents__link">1.2.支付流程</a></li><li><a href="#13sdk集成流程" class="table-of-contents__link">1.3.SDK集成流程</a></li></ul></li><li><a href="#2申请心动appid" class="table-of-contents__link">2.申请心动AppID</a></li><li><a href="#3需要遵守的规则" class="table-of-contents__link">3.需要遵守的规则</a><ul><li><a href="#31回调依赖" class="table-of-contents__link">3.1.回调依赖</a></li></ul></li><li><a href="#4接入sdk" class="table-of-contents__link">4.接入SDK</a><ul><li><a href="#41获取sdk" class="table-of-contents__link">4.1.获取SDK</a></li><li><a href="#42声明相关的activity及文件配置" class="table-of-contents__link">4.2.声明相关的Activity及文件配置</a></li><li><a href="#43-android-11-适配" class="table-of-contents__link">4.3 Android 11 适配</a></li></ul></li><li><a href="#5接口调用" class="table-of-contents__link">5.接口调用</a><ul><li><a href="#51配置sdk登录选项" class="table-of-contents__link">5.1.配置SDK登录选项</a></li><li><a href="#52设置回调" class="table-of-contents__link">5.2.设置回调</a></li><li><a href="#53初始化sdk" class="table-of-contents__link">5.3.初始化SDK</a></li><li><a href="#54登录" class="table-of-contents__link">5.4.登录</a></li><li><a href="#55获取access-token" class="table-of-contents__link">5.5.获取Access Token</a></li><li><a href="#56获取当前登录状态" class="table-of-contents__link">5.6.获取当前登录状态</a></li><li><a href="#57打开用户中心" class="table-of-contents__link">5.7.打开用户中心</a></li><li><a href="#58发起支付" class="table-of-contents__link">5.8.发起支付</a></li><li><a href="#59登出" class="table-of-contents__link">5.9.登出</a></li><li><a href="#510游客升级" class="table-of-contents__link">5.10.游客升级</a></li><li><a href="#511退出" class="table-of-contents__link">5.11.退出</a></li><li><a href="#512实名认证" class="table-of-contents__link">5.12.实名认证</a></li><li><a href="#513游客绑定" class="table-of-contents__link">5.13.游客绑定</a></li><li><a href="#514游戏启停设置" class="table-of-contents__link">5.14.游戏启停设置</a></li><li><a href="#515客服" class="table-of-contents__link">5.15.客服</a></li><li><a href="#516打开协议页面" class="table-of-contents__link">5.16.打开协议页面</a></li><li><a href="#517设置角色信息" class="table-of-contents__link">5.17.设置角色信息</a></li></ul></li><li><a href="#6服务端对接" class="table-of-contents__link">6.服务端对接</a><ul><li><a href="#61获取用户信息" class="table-of-contents__link">6.1.获取用户信息</a></li><li><a href="#62处理支付回调" class="table-of-contents__link">6.2.处理支付回调</a></li></ul></li><li><a href="#7多渠道打包" class="table-of-contents__link">7.多渠道打包</a><ul><li><a href="#71-配置渠道文件" class="table-of-contents__link">7.1 配置渠道文件</a></li><li><a href="#72-提交打包信息" class="table-of-contents__link">7.2 提交打包信息</a></li><li><a href="#73-依赖配置" class="table-of-contents__link">7.3 依赖配置</a></li><li><a href="#74-tapdb-sdk单接处理" class="table-of-contents__link">7.4 TapDB SDK单接处理</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/XDSDK-Doc/styles.04ea6341.js"></script>
<script src="/XDSDK-Doc/runtime~main.aa48e010.js"></script>
<script src="/XDSDK-Doc/main.00965467.js"></script>
<script src="/XDSDK-Doc/1.ab684445.js"></script>
<script src="/XDSDK-Doc/2.f8601547.js"></script>
<script src="/XDSDK-Doc/22.95066253.js"></script>
<script src="/XDSDK-Doc/935f2afb.84422a50.js"></script>
<script src="/XDSDK-Doc/17896441.f8f7aa8e.js"></script>
<script src="/XDSDK-Doc/6e641c59.8633def8.js"></script>
</body>
</html>